{% extends "trs/base.html" %}
{% load trs_formatting %}

{% block main-column %}
  <h1>
    {{ view.project.code }}
    <small>{{ view.project.description }}</small>
  </h1>
  <dl>
    <dt>Opdrachtgever</dt>
    <dd>TODO</dd>
    <dt>Begindatum</dt>
    <dd>TODO</dd>
    <dt>Einddatum</dt>
    <dd>TODO</dd>
  </dl>

  <h2>Wie werkt hierop?</h2>
  <div class="table-responsive">
    <table class="table">
      <thead>
        <tr>
          <th>Wie</th>
          <th class="text-right">Budget</th>
          <th class="text-right">Geboekt</th>
          <th class="text-right">Tarief</th>
          <th class="text-right">Omgezet</th>
        </tr>
      </thead>

      <tbody>
        {% for line in view.lines %}
          <tr>
            <td>{{ line.person.as_widget }}</td>
            <td class="text-right">{{ line.budget|hours }}</td>
            <td class="text-right">{{ line.booked|hours }}</td>
            <td class="text-right">{{ line.hourly_tariff|money }}</td>
            <td class="text-right">{{ line.turnover|money }}</td>
          </tr>
        {% endfor %}
      </tbody>

      <tfoot>
        <tr>
          <th>Totaal omgezet</th>
          <td class="text-right"></td>
          <td class="text-right"></td>
          <td class="text-right"></td>
          <th class="text-right">{{ view.total_turnover|money }}</th>
        </tr>
      </tfoot>
    </table>
  </div>

  <h2>Financi&euml;n</h2>
  <div class="table-responsive">
    <table class="table">
      <thead>
        <tr>
          <th>Beschrijving</th>
          <th class="text-right">Bedrag</th>
        </tr>
      </thead>
      <tbody>
        {% for budget_assignment in view.project.budget_assignments.all %}
          <tr>
            <td>TODO{{ budget_assignment.as_widget }}</td>
            <td class="text-right">{{ budget_assignment.budget|money }}</td>
          </tr>
        {% endfor %}
      </tbody>
      <tbody>
        <tr>
          <th>Subtotaal</th>
          <th class="text-right">{{ view.subtotal|money }}</th>
        </tr>
        <tr>
          <td>Totaal omgezet</td>
          <td class="text-right">{{ view.total_turnover|money }}</td>
        </tr>
      </tbody>
      <tfoot>
        <tr>
          <th>Nog niet omgezet</th>
          <th class="text-right">{{ view.amount_left|money }}</th>
        </tr>
      </tfoot>
    </table>
  </div>

{% endblock %}
